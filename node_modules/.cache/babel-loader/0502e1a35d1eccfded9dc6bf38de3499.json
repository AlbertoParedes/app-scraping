{"ast":null,"code":"import _assertThisInitialized from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _slicedToArray from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Alberto\\\\Documents\\\\workspaces\\\\react\\\\YOSEO-SCRIPTS\\\\src\\\\components\\\\ContainerApp\\\\Categorias\\\\PanelAhrefsKeywords\\\\AhrefsKeywords.js\";\nimport React, { Component } from \"react\";\nimport ExcelButton from './ExcelButton';\nimport moment from 'moment';\nimport Card from './Card';\nimport { ReactComponent as Loop } from \"@svgr/webpack?-svgo,+ref!../../../Global/Images/loop.svg\";\nimport { ReactComponent as Cross } from \"@svgr/webpack?-svgo,+ref!../../../Global/Images/cross.svg\";\nimport { ReactComponent as Check } from \"@svgr/webpack?-svgo,+ref!../../../Global/Images/check.svg\";\nimport format from 'xml-formatter';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { setScrapingOpera } from '../../../../redux/actions';\nimport ReactHtmlParser from 'react-html-parser';\nimport ReactCountdownClock from 'react-countdown-clock';\nimport firebase from '../../../../firebase/Firebase';\nvar db = firebase.database().ref();\n\nvar _window$require = window.require('electron'),\n    ipcRenderer = _window$require.ipcRenderer;\n\nvar AhrefsKeywords =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AhrefsKeywords, _Component);\n\n  function AhrefsKeywords(props) {\n    var _this;\n\n    _classCallCheck(this, AhrefsKeywords);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AhrefsKeywords).call(this, props));\n\n    _this.componentWillReceiveProps = function (newProps) {\n      if (_this.state.visibility !== newProps.visibility) {\n        if (!_this.state.getData) {\n          _this.setState({\n            visibility: newProps.visibility,\n            getData: true\n          }, function () {\n            _this.getData();\n          });\n        } else {\n          _this.setState({\n            visibility: newProps.visibility\n          });\n        }\n      }\n\n      if (_this.state.documentScrapingOpera !== newProps.documentScrapingOpera) {\n        _this.setState({\n          documentScrapingOpera: newProps.documentScrapingOpera,\n          estados: {}\n        });\n      }\n    };\n\n    _this.componentWillMount = function () {\n      ipcRenderer.removeListener('RESPONSE_SCRAPING_KEYWORDS', _this.updateMessage);\n      ipcRenderer.removeListener('RESPONSE_SCRAPING_KEYWORDS_DB', _this.updateMessageDB);\n    };\n\n    _this.componentDidMount = function () {\n      ipcRenderer.on('RESPONSE_SCRAPING_KEYWORDS', _this.updateMessage);\n      ipcRenderer.on('RESPONSE_SCRAPING_KEYWORDS_DB', _this.updateMessageDB);\n    };\n\n    _this.updateMessageDB = function (event, data) {\n      var idDocument = data.idDocument,\n          idKeyword = data.idKeyword,\n          listResultados = data.listResultados,\n          multiPath = {};\n      multiPath['Others/apps/scraping/keywords-explorer-ahrefs/documents/' + idDocument + '/keywords/' + idKeyword + '/results'] = listResultados;\n      console.log(multiPath);\n      db.update(multiPath).then(function () {\n        console.log('Ok');\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.updateMessage = function (event, data) {\n      console.log(data);\n      var estados = _this.state.estados;\n      estados[data.id] = data;\n\n      if (data.status === 'error' || data.text === 'Done') {\n        _this.props.setScrapingOpera(false);\n      }\n\n      _this.setState({\n        estados: estados\n      });\n    };\n\n    _this.getData = function () {\n      console.log('getting data...');\n      db.child('Others/apps/scraping/keywords-explorer-ahrefs/documents').orderByKey().on(\"value\", function (snapshot) {\n        var documents = {},\n            recentDocuments = {};\n        snapshot.forEach(function (data) {\n          var fecha = moment(data.val().timestamp);\n          var hoy = moment();\n          var dif = hoy.diff(fecha, 'days') + 1;\n\n          if (dif > 3) {\n            documents[data.key] = data.val();\n          } else {\n            recentDocuments[data.key] = data.val();\n          }\n        });\n        var recentDocumentsOrdenados = Object.entries(recentDocuments);\n        recentDocumentsOrdenados.sort(function (a, b) {\n          a = a[1];\n          b = b[1];\n\n          if (a.timestamp > b.timestamp) {\n            return 1;\n          }\n\n          if (a.timestamp < b.timestamp) {\n            return -1;\n          }\n\n          return 0;\n        });\n        recentDocumentsOrdenados.reverse();\n        var documentsOrdenados = Object.entries(documents);\n        documentsOrdenados.sort(function (a, b) {\n          a = a[1];\n          b = b[1];\n\n          if (a.timestamp > b.timestamp) {\n            return 1;\n          }\n\n          if (a.timestamp < b.timestamp) {\n            return -1;\n          }\n\n          return 0;\n        });\n        documentsOrdenados.reverse();\n\n        _this.setState({\n          documents: documentsOrdenados,\n          recentDocuments: recentDocumentsOrdenados\n        });\n      });\n    };\n\n    _this.getDataExcel = function (dataFile) {\n      var keywords = {},\n          document = {},\n          key = false;\n\n      var getKeywords =\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          var id_document, multiPath;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  id_document = db.child(\"Others/apps/scraping/keywords-explorer-ahrefs/documents\").push().key;\n                  _context2.next = 3;\n                  return dataFile.data.forEach(\n                  /*#__PURE__*/\n                  function () {\n                    var _ref2 = _asyncToGenerator(\n                    /*#__PURE__*/\n                    _regeneratorRuntime.mark(function _callee(element, key) {\n                      var dato;\n                      return _regeneratorRuntime.wrap(function _callee$(_context) {\n                        while (1) {\n                          switch (_context.prev = _context.next) {\n                            case 0:\n                              //if (key === 0) return null; con esto obviamos la primera fila\n                              dato = element[0];\n\n                              if (dato && dato.toString() !== \"\") {\n                                key = db.child(\"Others/apps/scraping/keywords-explorer-ahrefs/documents/\".concat(id_document, \"/keywords\")).push().key;\n                                keywords[key] = {\n                                  id_keyword: key,\n                                  keyword: dato.toString()\n                                };\n                              }\n\n                            case 2:\n                            case \"end\":\n                              return _context.stop();\n                          }\n                        }\n                      }, _callee);\n                    }));\n\n                    return function (_x, _x2) {\n                      return _ref2.apply(this, arguments);\n                    };\n                  }());\n\n                case 3:\n                  document = {\n                    id_document: id_document,\n                    keywords: keywords,\n                    timestamp: +new Date(),\n                    name: dataFile.nameFile,\n                    sheetName: dataFile.sheetName\n                  };\n                  multiPath = {};\n                  multiPath[\"Others/apps/scraping/keywords-explorer-ahrefs/documents/\".concat(id_document)] = document;\n\n                  if (document && document.keywords && Object.keys(document.keywords).length > 0 && (dataFile.nameFile.includes('.xlsx') || dataFile.nameFile.includes('.xls'))) {\n                    db.update(multiPath).then(function () {//console.log('ok');\n                    }).catch(function (err) {\n                      return console.log(err);\n                    });\n                  }\n\n                case 7:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function getKeywords() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      getKeywords();\n    };\n\n    _this.state = {\n      documents: {},\n      visibility: _this.props.visibility,\n      documentScrapingOpera: _this.props.documentScrapingOpera,\n      getData: false,\n      recentDocuments: {},\n      estados: {},\n      styleImage: {\n        background: \"linear-gradient(95.65deg, rgb(22, 26, 57) 13.2%, rgba(22, 26, 57, 0.9) 55.88%, rgba(39, 39, 72, 0.35) 97.88%) center center / cover, url(\".concat(_this.props.app.image, \") no-repeat\"),\n        backgroundPosition: \"center center\",\n        transition: 'transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) 0s',\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        top: '0px',\n        left: '0px'\n      }\n    };\n    return _this;\n  }\n\n  _createClass(AhrefsKeywords, [{\n    key: \"render\",\n    value: function render() {\n      if (!this.state.visibility) return false;\n      var numDocuments = Object.keys(this.state.recentDocuments).length + Object.keys(this.state.documents).length;\n      return React.createElement(\"div\", {\n        className: \"home-app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \" \".concat(this.state.documentScrapingOpera ? 'show-terminal' : 'hidde-terminal'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-terminal pr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"tiitle-grid pdd-top-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Terminal\"), this.state.estados['5461'] && this.state.estados['5461'].status === 'running' ? React.createElement(CountDown, {\n        seconds: this.state.estados['5461'].seconds,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }) : null, Object.entries(this.state.estados).map(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            i = _ref4[0],\n            o = _ref4[1];\n\n        if (o.seconds) return null;\n        return React.createElement(\"div\", {\n          className: \"item-terminal\",\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, o.status === 'running' ? React.createElement(Loop, {\n          className: \"loop-item-prensarank\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }) : null, o.status === 'ok' ? React.createElement(Check, {\n          className: \"check-item-prensarank\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }) : null, o.status === 'error' ? React.createElement(Cross, {\n          className: \"cross-item-prensarank\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }) : null, React.createElement(\"div\", {\n          className: \"text-item-prensarank\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, ReactHtmlParser(o.text)));\n      }))), React.createElement(\"div\", {\n        className: \"container-type1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"img-container-panel\",\n        style: this.state.styleImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"pr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, this.props.app.titlePanel), React.createElement(\"div\", {\n        className: \"container-tools-ahrefs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"subtitle-container-principal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, numDocuments, \" \", numDocuments === 1 ? 'DOCUMENTO' : 'DOCUMENTOS')), React.createElement(\"div\", {\n        className: \"text-explicativo-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, this.props.app.desciption)), React.createElement(\"div\", {\n        className: \"container-buttons-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(ExcelButton, {\n        getDataExcel: this.getDataExcel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }))), this.state.recentDocuments.length > 0 ? React.createElement(\"h3\", {\n        className: \"tiitle-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Documentos Recientes\") : null, this.state.recentDocuments.length > 0 ? React.createElement(\"div\", {\n        className: \"CardGroup2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, this.state.recentDocuments.map(function (item, id) {\n        return React.createElement(Card, {\n          key: id,\n          item: item[1],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        });\n      })) : null, this.state.documents.length > 0 ? React.createElement(\"h3\", {\n        className: \"tiitle-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \"Documentos\") : null, this.state.documents.length > 0 ? React.createElement(\"div\", {\n        className: \"CardGroup2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, this.state.documents.map(function (item, id) {\n        return React.createElement(Card, {\n          key: id,\n          item: item[1],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        });\n      })) : null);\n    }\n  }]);\n\n  return AhrefsKeywords;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    documentScrapingOpera: state.global.documentScrapingOpera\n  };\n}\n\nfunction matchDispatchToProps(dispatch) {\n  return bindActionCreators({\n    setScrapingOpera: setScrapingOpera\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, matchDispatchToProps)(AhrefsKeywords);\n\nvar CountDown =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(CountDown, _Component2);\n\n  function CountDown(props) {\n    var _this2;\n\n    _classCallCheck(this, CountDown);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(CountDown).call(this, props));\n\n    _this2.componentWillReceiveProps = function (newProps) {\n      if (_this2.state.seconds !== newProps.seconds) {\n        _this2.setState({\n          seconds: newProps.seconds\n        }, function () {\n          _this2.changeTimer();\n        });\n      }\n    };\n\n    _this2.componentDidMount = function () {\n      _this2.changeTimer();\n    };\n\n    _this2.changeTimer = function () {\n      var self = _assertThisInitialized(_this2);\n\n      var timeleft = self.state.seconds;\n      var downloadTimer = setInterval(function () {\n        timeleft -= 1;\n\n        if (timeleft <= 0) {\n          clearInterval(downloadTimer);\n        }\n\n        self.setState({\n          seconds: timeleft\n        });\n      }, 1000);\n    };\n\n    _this2.state = {\n      seconds: _this2.props.seconds\n    };\n    return _this2;\n  }\n\n  _createClass(CountDown, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"countdown-terminal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, this.state.seconds);\n    }\n  }]);\n\n  return CountDown;\n}(Component);","map":{"version":3,"sources":["C:\\Users\\Alberto\\Documents\\workspaces\\react\\YOSEO-SCRIPTS\\src\\components\\ContainerApp\\Categorias\\PanelAhrefsKeywords\\AhrefsKeywords.js"],"names":["React","Component","ExcelButton","moment","Card","format","connect","bindActionCreators","setScrapingOpera","ReactHtmlParser","ReactCountdownClock","firebase","db","database","ref","window","require","ipcRenderer","AhrefsKeywords","props","componentWillReceiveProps","newProps","state","visibility","getData","setState","documentScrapingOpera","estados","componentWillMount","removeListener","updateMessage","updateMessageDB","componentDidMount","on","event","data","idDocument","idKeyword","listResultados","multiPath","console","log","update","then","catch","err","id","status","text","child","orderByKey","snapshot","documents","recentDocuments","forEach","fecha","val","timestamp","hoy","dif","diff","key","recentDocumentsOrdenados","Object","entries","sort","a","b","reverse","documentsOrdenados","getDataExcel","dataFile","keywords","document","getKeywords","id_document","push","element","dato","toString","id_keyword","keyword","Date","name","nameFile","sheetName","keys","length","includes","styleImage","background","app","image","backgroundPosition","transition","position","width","height","top","left","numDocuments","seconds","map","i","o","titlePanel","desciption","item","mapStateToProps","global","matchDispatchToProps","dispatch","CountDown","changeTimer","self","timeleft","downloadTimer","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport ExcelButton from './ExcelButton'\r\nimport moment from 'moment'\r\nimport Card from './Card'\r\nimport { ReactComponent as Loop } from '../../../Global/Images/loop.svg';\r\nimport { ReactComponent as Cross } from '../../../Global/Images/cross.svg';\r\nimport { ReactComponent as Check } from '../../../Global/Images/check.svg';\r\n\r\nimport format from 'xml-formatter'\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { setScrapingOpera } from '../../../../redux/actions';\r\nimport ReactHtmlParser from 'react-html-parser'; \r\nimport ReactCountdownClock from 'react-countdown-clock';\r\nimport firebase from '../../../../firebase/Firebase';\r\nconst db = firebase.database().ref();\r\n\r\nconst { ipcRenderer } = window.require('electron');\r\n\r\nclass AhrefsKeywords extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      documents: {},\r\n      visibility:this.props.visibility,\r\n      documentScrapingOpera: this.props.documentScrapingOpera,\r\n      getData:false,\r\n      recentDocuments:{},\r\n      estados:{},\r\n      styleImage:{\r\n        background:`linear-gradient(95.65deg, rgb(22, 26, 57) 13.2%, rgba(22, 26, 57, 0.9) 55.88%, rgba(39, 39, 72, 0.35) 97.88%) center center / cover, url(${this.props.app.image}) no-repeat`,\r\n        backgroundPosition: \"center center\",\r\n        transition: 'transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) 0s',\r\n        position: 'absolute',\r\n        width: '100%',\r\n        height: '100%',\r\n        top: '0px',\r\n        left: '0px'\r\n      }\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps = newProps => {\r\n    if(this.state.visibility!==newProps.visibility){\r\n      if(!this.state.getData){\r\n        this.setState({visibility:newProps.visibility,getData:true},()=>{\r\n          this.getData()\r\n        })\r\n      }else{\r\n        this.setState({visibility:newProps.visibility})\r\n      }\r\n    }\r\n    if(this.state.documentScrapingOpera!==newProps.documentScrapingOpera){\r\n      this.setState({documentScrapingOpera:newProps.documentScrapingOpera, estados:{} })\r\n    }\r\n  }\r\n\r\n  componentWillMount = () => {\r\n    ipcRenderer.removeListener('RESPONSE_SCRAPING_KEYWORDS',this.updateMessage);\r\n    ipcRenderer.removeListener('RESPONSE_SCRAPING_KEYWORDS_DB',this.updateMessageDB);\r\n  }\r\n  componentDidMount = () => {\r\n    ipcRenderer.on('RESPONSE_SCRAPING_KEYWORDS',this.updateMessage);\r\n    ipcRenderer.on('RESPONSE_SCRAPING_KEYWORDS_DB',this.updateMessageDB);\r\n  }\r\n  updateMessageDB = (event, data) => {\r\n    \r\n    var {idDocument, idKeyword, listResultados} = data, multiPath={}\r\n    multiPath['Others/apps/scraping/keywords-explorer-ahrefs/documents/'+idDocument+'/keywords/'+idKeyword+'/results']=listResultados;\r\n    console.log(multiPath);\r\n    db.update(multiPath)\r\n    .then(()=>{ console.log('Ok'); })\r\n    .catch(err=>console.log(err))\r\n  }\r\n  updateMessage = (event, data) => {\r\n    console.log(data);\r\n    \r\n\r\n    var estados = this.state.estados;\r\n\r\n    estados[data.id]=data;\r\n    if(data.status==='error' || data.text==='Done'){\r\n      this.props.setScrapingOpera(false)\r\n    }\r\n    this.setState({estados})\r\n  }\r\n\r\n  getData = () => {\r\n    console.log('getting data...');\r\n    \r\n    db.child('Others/apps/scraping/keywords-explorer-ahrefs/documents').orderByKey().on(\"value\", snapshot => {\r\n      var documents = {},recentDocuments ={}\r\n      snapshot.forEach(data => {\r\n        var fecha = moment(data.val().timestamp)\r\n        var hoy = moment()\r\n        var dif = hoy.diff(fecha,'days')+1\r\n        if(dif>3){\r\n          documents[data.key] = data.val();\r\n        }else{\r\n          recentDocuments[data.key] = data.val();\r\n        }\r\n      })\r\n\r\n      var recentDocumentsOrdenados = Object.entries(recentDocuments)\r\n      recentDocumentsOrdenados.sort((a, b) => {\r\n        a = a[1]; b = b[1]\r\n        if (a.timestamp > b.timestamp) { return 1; }\r\n        if (a.timestamp < b.timestamp) { return -1; }\r\n        return 0;\r\n      });\r\n      recentDocumentsOrdenados.reverse();\r\n\r\n      var documentsOrdenados = Object.entries(documents)\r\n      documentsOrdenados.sort((a, b) => {\r\n        a = a[1]; b = b[1]\r\n        if (a.timestamp > b.timestamp) { return 1; }\r\n        if (a.timestamp < b.timestamp) { return -1; }\r\n        return 0;\r\n      });\r\n      documentsOrdenados.reverse();\r\n      this.setState({ documents:documentsOrdenados , recentDocuments: recentDocumentsOrdenados })\r\n    })\r\n\r\n\r\n  }\r\n\r\n  getDataExcel = (dataFile) => {\r\n    var keywords = {}, document = {}, key = false;\r\n    const getKeywords = async () => {\r\n      var id_document = db.child(`Others/apps/scraping/keywords-explorer-ahrefs/documents`).push().key;\r\n      await dataFile.data.forEach(async (element, key) => {\r\n        //if (key === 0) return null; con esto obviamos la primera fila\r\n        var dato = element[0];\r\n        if (dato && dato.toString() !== \"\") {\r\n          key = db.child(`Others/apps/scraping/keywords-explorer-ahrefs/documents/${id_document}/keywords`).push().key;\r\n          keywords[key] = { id_keyword: key, keyword: dato.toString() }\r\n        }\r\n      })\r\n      document = {\r\n        id_document,\r\n        keywords,\r\n        timestamp: (+ new Date()),\r\n        name: dataFile.nameFile,\r\n        sheetName: dataFile.sheetName\r\n      }\r\n      var multiPath = {}\r\n      multiPath[`Others/apps/scraping/keywords-explorer-ahrefs/documents/${id_document}`] = document\r\n      if (document && document.keywords && Object.keys(document.keywords).length > 0 && (dataFile.nameFile.includes('.xlsx') || dataFile.nameFile.includes('.xls') ) ) {\r\n        db.update(multiPath)\r\n          .then(() => {\r\n            //console.log('ok');\r\n          })\r\n          .catch(err => console.log(err))\r\n      }\r\n    }\r\n    getKeywords();\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    if(!this.state.visibility)return false\r\n    var numDocuments = Object.keys(this.state.recentDocuments).length + Object.keys(this.state.documents).length\r\n    return (\r\n      <div className='home-app' >\r\n\r\n        {/*TERMINAL*/}\r\n        <div className={` ${this.state.documentScrapingOpera?'show-terminal':'hidde-terminal'}`}>\r\n          <div className={`container-terminal pr`}>\r\n            <h3 className='tiitle-grid pdd-top-10'>Terminal</h3>\r\n\r\n            {this.state.estados['5461'] && this.state.estados['5461'].status==='running'?\r\n              <CountDown  seconds={this.state.estados['5461'].seconds}/>\r\n            :null}\r\n \r\n\r\n            {\r\n              Object.entries(this.state.estados).map(([i,o])=>{\r\n                if(o.seconds)return null;\r\n\r\n                return(\r\n                  <div className='item-terminal' key={i}>\r\n                    {o.status==='running'?<Loop className='loop-item-prensarank' />:null}\r\n                    {o.status==='ok'?<Check className='check-item-prensarank' />:null}\r\n                    {o.status==='error'?<Cross className='cross-item-prensarank' />:null}\r\n                    <div className='text-item-prensarank'>\r\n                      {ReactHtmlParser(o.text)}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n          </div>\r\n        </div>\r\n\r\n        <div  className='container-type1' >\r\n          <div className='img-container-panel' style={this.state.styleImage}></div>\r\n          <div className='pr'>\r\n            <h1>{this.props.app.titlePanel}</h1>\r\n            <div className='container-tools-ahrefs'>\r\n              <p className='subtitle-container-principal'>{numDocuments} {numDocuments===1?'DOCUMENTO':'DOCUMENTOS'}</p>\r\n            </div>\r\n            <div className='text-explicativo-container'>{this.props.app.desciption}</div>\r\n          </div>\r\n          \r\n          <div className='container-buttons-panel'>\r\n            <ExcelButton getDataExcel={this.getDataExcel} />\r\n          </div>\r\n          \r\n        \r\n        </div>\r\n\r\n\r\n        {this.state.recentDocuments.length>0?<h3 className='tiitle-grid'>Documentos Recientes</h3>:null}\r\n        {\r\n          this.state.recentDocuments.length>0?\r\n            <div className='CardGroup2'>\r\n              {\r\n                this.state.recentDocuments.map((item, id) => {\r\n                  return(\r\n                    <Card key={id} item={item[1]} />\r\n                  )\r\n                })\r\n              }\r\n            </div>:null\r\n        }\r\n\r\n        {this.state.documents.length>0?<h3 className='tiitle-grid'>Documentos</h3>:null}\r\n        {\r\n          this.state.documents.length>0?\r\n            <div className='CardGroup2'>\r\n              {\r\n                this.state.documents.map((item, id) => {\r\n                  return(\r\n                    <Card key={id} item={item[1]} />\r\n                  )\r\n                })\r\n              }\r\n            </div>:null\r\n        }\r\n\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {return {documentScrapingOpera: state.global.documentScrapingOpera}}\r\nfunction matchDispatchToProps(dispatch) { return bindActionCreators({ setScrapingOpera }, dispatch)}\r\nexport default connect(mapStateToProps, matchDispatchToProps)(AhrefsKeywords);\r\n\r\nclass CountDown extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      seconds:this.props.seconds\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps = (newProps) =>{\r\n    if(this.state.seconds!==newProps.seconds){\r\n      this.setState({seconds: newProps.seconds}, ()=>{this.changeTimer()})\r\n    }\r\n  }\r\n\r\n  componentDidMount = () =>{\r\n    this.changeTimer()\r\n  }\r\n\r\n  changeTimer = () =>{\r\n    var self = this\r\n    var timeleft = self.state.seconds;\r\n    var downloadTimer = setInterval(function(){\r\n      timeleft -= 1;\r\n      if(timeleft <= 0){clearInterval(downloadTimer)}\r\n      self.setState({seconds: timeleft})\r\n    }, 1000);\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div className='countdown-terminal'>\r\n        {this.state.seconds}\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}